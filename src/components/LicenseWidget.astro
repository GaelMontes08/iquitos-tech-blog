---
export interface Props {
  type?: 'default' | 'compact' | 'minimal';
  showIcon?: boolean;
  customText?: string;
}

const { 
  type = 'default',
  showIcon = true,
  customText
} = Astro.props;
---

<div class={`license-widget ${type}`}>
  {type === 'default' && (
    <div class="bg-blue-500/10 border border-blue-500/20 rounded-xl p-4">
      <div class="flex items-start space-x-3">
        {showIcon && (
          <svg class="w-6 h-6 text-blue-400 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
        )}
        <div class="flex-1">
          <h4 class="text-sm font-semibold text-blue-200 mb-2">
            Licencia de contenido
          </h4>
          <p class="text-sm text-blue-200/90 leading-relaxed">
            {customText || 'Este artículo está licenciado bajo Creative Commons BY-NC-SA 4.0. Puedes compartir y adaptar el contenido para usos no comerciales con atribución apropiada.'}
          </p>
          <div class="flex flex-wrap items-center gap-3 mt-3 text-xs">
            <a 
              href="https://creativecommons.org/licenses/by-nc-sa/4.0/" 
              target="_blank" 
              rel="noopener"
              class="inline-flex items-center space-x-1 text-blue-300 hover:text-blue-200 transition-colors"
            >
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
              </svg>
              <span>Ver licencia completa</span>
            </a>
            <span class="text-blue-400/60">•</span>
            <a 
              href="/licensing" 
              class="text-blue-300 hover:text-blue-200 transition-colors"
            >
              Más información
            </a>
          </div>
        </div>
      </div>
    </div>
  )}

  {type === 'compact' && (
    <div class="bg-gray-800/50 border border-gray-700 rounded-lg p-3">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-2">
          {showIcon && (
            <svg class="w-4 h-4 text-blue-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
          )}
          <span class="text-sm text-gray-300">
            Licenciado bajo CC BY-NC-SA 4.0
          </span>
        </div>
        <a 
          href="/licensing" 
          class="text-xs text-blue-400 hover:text-blue-300 transition-colors"
        >
          Ver detalles
        </a>
      </div>
    </div>
  )}

  {type === 'minimal' && (
    <div class="text-xs text-gray-500 border-t border-gray-800 pt-3 mt-6">
      <p class="flex items-center justify-center space-x-2">
        {showIcon && (
          <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
        )}
        <span>Contenido bajo</span>
        <a 
          href="https://creativecommons.org/licenses/by-nc-sa/4.0/" 
          target="_blank" 
          rel="noopener"
          class="text-blue-400 hover:text-blue-300 transition-colors"
        >
          CC BY-NC-SA 4.0
        </a>
        <span>•</span>
        <a 
          href="/licensing" 
          class="text-blue-400 hover:text-blue-300 transition-colors"
        >
          Más info
        </a>
      </p>
    </div>
  )}
</div>

<style>
  .license-widget.default {
    margin: 1.5rem 0;
  }
  
  .license-widget.compact {
    margin: 1rem 0;
  }
  
  .license-widget.minimal {
    margin-top: 2rem;
  }
</style>
