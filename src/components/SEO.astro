---
import { generateSEOTags, generateRobotsContent, generateSchemaScript, defaultSEO, siteConfig, optimizeImageForSocialMedia, type SEOProps } from '../lib/seo';

export interface Props extends SEOProps {}

const props = Astro.props as Props;

const seoTags = generateSEOTags({ ...defaultSEO, ...props });
const robotsContent = generateRobotsContent(seoTags.robots);
const schemaScript = generateSchemaScript(seoTags.schema);

const socialImage = optimizeImageForSocialMedia(seoTags.ogImage) || 'https://iquitostech.com/fallback-banner.webp';
---

<title>{seoTags.title}</title>
<meta name="title" content={seoTags.title} />
<meta name="description" content={seoTags.description} />
{seoTags.keywords && <meta name="keywords" content={seoTags.keywords} />}
<meta name="author" content={seoTags.articleAuthor || 'Iquitos Tech'} />
<meta name="language" content="es" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content={siteConfig.themeColor} />

<link rel="canonical" href={seoTags.canonical} />

<meta name="robots" content={robotsContent} />

<meta property="og:type" content={seoTags.ogType} />
<meta property="og:url" content={seoTags.ogUrl || seoTags.canonical} />
<meta property="og:title" content={seoTags.ogTitle || seoTags.title} />
<meta property="og:description" content={seoTags.ogDescription || seoTags.description} />
<meta property="og:image" content={socialImage} />
<meta property="og:image:width" content={seoTags.ogImageWidth?.toString() || '1200'} />
<meta property="og:image:height" content={seoTags.ogImageHeight?.toString() || '630'} />
<meta property="og:site_name" content={seoTags.ogSiteName} />
<meta property="og:locale" content={seoTags.ogLocale} />

{seoTags.ogType === 'article' && (
  <>
    {seoTags.articlePublishedTime && <meta property="article:published_time" content={seoTags.articlePublishedTime} />}
    {seoTags.articleModifiedTime && <meta property="article:modified_time" content={seoTags.articleModifiedTime} />}
    {seoTags.articleAuthor && <meta property="article:author" content={seoTags.articleAuthor} />}
  </>
)}

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@IquitosTech" />
<meta name="twitter:creator" content="@IquitosTech" />
<meta name="twitter:title" content={seoTags.ogTitle || seoTags.title} />
<meta name="twitter:description" content={seoTags.ogDescription || seoTags.description} />
<meta name="twitter:image" content={socialImage} />

{seoTags.twitterLabel1 && seoTags.twitterData1 && (
  <>
    <meta name="twitter:label1" content={seoTags.twitterLabel1} />
    <meta name="twitter:data1" content={seoTags.twitterData1} />
  </>
)}
{seoTags.twitterLabel2 && seoTags.twitterData2 && (
  <>
    <meta name="twitter:label2" content={seoTags.twitterLabel2} />
    <meta name="twitter:data2" content={seoTags.twitterData2} />
  </>
)}

{schemaScript && (
  <script type="application/ld+json" set:html={schemaScript}></script>
)}

<link rel="icon" type="image/svg+xml" href="/logo.svg" />
<link rel="apple-touch-icon" sizes="180x180" href="/logo.svg" />

<meta name="generator" content={Astro.generator} />
