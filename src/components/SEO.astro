---
import { generateSEOTags, generateRobotsContent, generateSchemaScript, defaultSEO, siteConfig, type SEOProps } from '../lib/seo';

export interface Props extends SEOProps {}

const props = Astro.props as Props;

// Generate all SEO tags
const seoTags = generateSEOTags({ ...defaultSEO, ...props });
const robotsContent = generateRobotsContent(seoTags.robots);
const schemaScript = generateSchemaScript(seoTags.schema);
---

<!-- Basic Meta Tags -->
{seoTags.title && <title>{seoTags.title}</title>}
{seoTags.description && <meta name="description" content={seoTags.description} />}
{seoTags.canonical && <link rel="canonical" href={seoTags.canonical} />}

<!-- Robots -->
<meta name="robots" content={robotsContent} />
<meta name="googlebot" content="index,follow" />
<meta name="bingbot" content="index,follow" />

<!-- Sitemap for indexing -->
<link rel="sitemap" type="application/xml" href="/sitemap.xml" />

<!-- Additional SEO meta tags -->
<meta name="language" content="es" />
<meta name="revisit-after" content="7 days" />
<meta name="distribution" content="global" />
<meta name="rating" content="general" />

<!-- Theme and Viewport -->
<meta name="theme-color" content={siteConfig.themeColor} />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- Open Graph -->
{seoTags.ogTitle && <meta property="og:title" content={seoTags.ogTitle} />}
{seoTags.ogDescription && <meta property="og:description" content={seoTags.ogDescription} />}
{seoTags.ogType && <meta property="og:type" content={seoTags.ogType} />}
{seoTags.ogUrl && <meta property="og:url" content={seoTags.ogUrl} />}
{seoTags.ogSiteName && <meta property="og:site_name" content={seoTags.ogSiteName} />}
{seoTags.ogLocale && <meta property="og:locale" content={seoTags.ogLocale} />}

<!-- Open Graph Image -->
{seoTags.ogImage && (
  <>
    <meta property="og:image" content={seoTags.ogImage} />
    {seoTags.ogImageWidth && <meta property="og:image:width" content={seoTags.ogImageWidth.toString()} />}
    {seoTags.ogImageHeight && <meta property="og:image:height" content={seoTags.ogImageHeight.toString()} />}
    {seoTags.ogImageType && <meta property="og:image:type" content={seoTags.ogImageType} />}
  </>
)}

<!-- Article Meta (for blog posts) -->
{seoTags.ogType === 'article' && (
  <>
    {seoTags.articlePublishedTime && <meta property="article:published_time" content={seoTags.articlePublishedTime} />}
    {seoTags.articleModifiedTime && <meta property="article:modified_time" content={seoTags.articleModifiedTime} />}
    {seoTags.articleAuthor && <meta property="article:author" content={seoTags.articleAuthor} />}
  </>
)}

<!-- Twitter Cards -->
{seoTags.twitterCard && <meta name="twitter:card" content={seoTags.twitterCard} />}
{seoTags.twitterSite && <meta name="twitter:site" content={seoTags.twitterSite} />}
{seoTags.twitterCreator && <meta name="twitter:creator" content={seoTags.twitterCreator} />}
{seoTags.ogTitle && <meta name="twitter:title" content={seoTags.ogTitle} />}
{seoTags.ogDescription && <meta name="twitter:description" content={seoTags.ogDescription} />}
{seoTags.ogImage && <meta name="twitter:image" content={seoTags.ogImage} />}

<!-- Twitter Labels (for rich snippets) -->
{seoTags.twitterLabel1 && seoTags.twitterData1 && (
  <>
    <meta name="twitter:label1" content={seoTags.twitterLabel1} />
    <meta name="twitter:data1" content={seoTags.twitterData1} />
  </>
)}
{seoTags.twitterLabel2 && seoTags.twitterData2 && (
  <>
    <meta name="twitter:label2" content={seoTags.twitterLabel2} />
    <meta name="twitter:data2" content={seoTags.twitterData2} />
  </>
)}

<!-- JSON-LD Schema -->
{schemaScript && (
  <script type="application/ld+json" set:html={schemaScript}></script>
)}

<!-- Additional Meta -->
<meta name="author" content={seoTags.articleAuthor || 'Iquitos Tech'} />
<meta name="generator" content={Astro.generator} />

<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="icon" type="image/svg+xml" href="/logo.svg" />
